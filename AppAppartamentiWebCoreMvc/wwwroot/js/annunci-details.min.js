function changeScroll(){document.body.scrollTop>100||document.documentElement.scrollTop>100?($("#secondnav").addClass("d-sm-block "),$("#nav").removeClass("shadow-sm")):($("#secondnav").removeClass("d-sm-block "),$("#nav").addClass("shadow-sm"))}function setMap(){var coordinates=$("#googleMap").data("latlng"),splittedCoordinates=coordinates.split(";"),lat=splittedCoordinates[0],lng=splittedCoordinates[1],LatLng={lat:parseFloat(lat),lng:parseFloat(lng)},map=new google.maps.Map(document.getElementById("googleMap"),{zoom:10,mapTypeControl:!1,streetViewControl:!1}),marker;map.setCenter(LatLng);marker=new google.maps.Marker({position:LatLng,map:map})}function GetAndShowAppuntamentiDisponibili(idAnnuncio,giorno){var containerOrari=document.getElementById("appointment-available");$(".btn-prenota-appuntamento").hide();containerOrari.innerHTML="";$.when(GetAppuntamentiDisponibiliAjax(idAnnuncio,giorno)).done(function(orari){orari!=null&&orari.length>0?(orari.forEach(function(orario){containerOrari.innerHTML+='<label class="btn btn-light btn-orario-appuntamento" "aria-pressed="true""  style="margin:0.5rem"><input type="checkbox">'+orario+"<\/label>"}),$(".btn-prenota-appuntamento").show()):containerOrari.innerHTML+='<div class="col-12 alert bg-light"><label class="h6">Non ci sono appuntamenti disponibili per il giorno selezionato.<\/label><\/div>';$(".btn-orario-appuntamento").click(function(){var cliccato=$(this);$(".btn-orario-appuntamento").each(function(){$(this)!=cliccato&&$(this).removeClass("active")})})})}function GetAppuntamentiDisponibiliAjax(idAnnuncio,giorno){return $.ajax({type:"GET",url:"/AnnunciPersonali/AppuntamentiDisponibili",data:{IdAnnuncio:idAnnuncio,Giorno:giorno},dataType:"json",contentType:"application/json; charset=utf-8"})}function PrenotaAppuntamento(){var ora=$(".btn-orario-appuntamento.active").text(),idAnnuncio=document.getElementById("id-annuncio").value,giorno=$("#giorno-selected").val(),ora=ora.split("-")[0];$.when(PrenotaAppuntamentoAjax(idAnnuncio,giorno,ora)).done(function(){alert("appuntamento done")})}function PrenotaAppuntamentoAjax(idAnnuncio,giorno,ora){return $.ajax({type:"GET",url:"/AnnunciPersonali/PrenotaAppuntamento",data:{IdAnnuncio:idAnnuncio,Giorno:giorno,Ora:ora},dataType:"json",contentType:"application/json; charset=utf-8",success:function(result,status,xhr){var i=status,b=error,c=xhr},error:function(xhr,status,error){var i=status,b=error,c=xhr;$("#appointmentModal").modal("toggle")}})}function GetImmaginiAnnuncioAjax(idAnnuncio){return $.ajax({type:"GET",url:"/Annunci/ImmaginiAnnuncio",data:{IdAnnuncio:idAnnuncio},dataType:"json",contentType:"application/json; charset=utf-8",success:function(result){var isActiveInserted=!1,innerHTML="";for(var k in result)isActiveInserted?innerHTML+='<div class="carousel-item" style="max-height: 500px"><img src="'+result[k]+'" class="d-block w-100" alt="image" /><\/div>':(innerHTML+='<div class="carousel-item active" style="height: 500px"><img src="'+result[k]+'" class="w-100 h-100" alt="image" /><\/div>',isActiveInserted=!0);$(".carousel-inner").html(innerHTML)},error:function(){}})}$(document).ready(function(){$("#secondnav").hide();window.onscroll=function(){changeScroll()};var calendarEl2=document.getElementById("appointment-caledar"),idAnnuncio=document.getElementById("id-annuncio").value,calendar2=new FullCalendar.Calendar(calendarEl2,{plugins:["dayGrid","timeGrid","interaction"],locale:selectedLanguage,themeSystem:"bootstrap",header:{left:"title",center:"",right:"prev,next"},footer:{left:"",center:"",right:""},dateClick:function(info){var now=new Date;(now.getFullYear()+"-"+(now.getMonth()+1)+"-"+now.getDate()==info.dateStr||info.date>now)&&($("#giorno-selected").val(info.dateStr),$(".fc-today").css("blackground","transparent !important"),GetAndShowAppuntamentiDisponibili(idAnnuncio,info.dateStr))},selectable:!0});calendar2.render();$(".btn-modal-prenota").click(function(){var now=new Date,idAnnuncio=document.getElementById("id-annuncio").value,today=new Date,dd=String(today.getDate()).padStart(2,"0"),mm=String(today.getMonth()+1).padStart(2,"0"),yyyy=today.getFullYear();GetAndShowAppuntamentiDisponibili(idAnnuncio,yyyy+"-"+mm+"-"+dd)});$(".btn-prenota-appuntamento").click(function(){PrenotaAppuntamento()})});