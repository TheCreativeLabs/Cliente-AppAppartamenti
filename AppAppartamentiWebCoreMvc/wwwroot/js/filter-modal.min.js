function UpdateSliderPrz(){let slider=document.getElementById("sliderPrezzo");slider.noUiSlider.set([$("#inp-prz-min").val(),$("#inp-prz-max").val()])}function UpdateSliderPrzAff(){let slider=document.getElementById("sliderPrezzoAff");slider.noUiSlider.set([$("#inp-prz-aff-min").val(),$("#inp-prz-aff-max").val()])}function UpdateSliderSup(){let slider=document.getElementById("sliderDimensione");slider.noUiSlider.set([$("#inp-sup-min").val(),$("#inp-sup-max").val()])}function LoadFilter(){try{codiceComune!=null&&codiceComune!=0&&($("#codiceComune").val(codiceComune),$(".search-textbox").val(nomeComune),$(".search-button").removeClass("disabled"));let sliderPrezzo=$("#sliderPrezzo"),prezzoMin=$(sliderPrezzo).data("min");prezzoMin=prezzoMin==undefined||prezzoMin==null||prezzoMin==0?5e4:prezzoMin;let prezzoMax=$(sliderPrezzo).data("max");prezzoMax=prezzoMax==undefined||prezzoMax==null||prezzoMax==0?25e4:prezzoMax;let uisliderprz=document.getElementById("sliderPrezzo");noUiSlider.create(uisliderprz,{start:[prezzoMin,prezzoMax],tooltips:[wNumb({mark:".",thousand:",",prefix:"€ ",suffix:"",decimals:0}),wNumb({mark:".",thousand:",",prefix:"€ ",suffix:"",decimals:0})],connect:!0,step:1e4,range:{min:3e4,max:5e5},format:{to:function(value){return value},from:function(value){return Number(value)}}});uisliderprz.noUiSlider.on("update",function(values){$("#inp-prz-min").val(values[0]);$("#inp-prz-max").val(values[1])});let sliderPrezzoAff=$("#sliderPrezzoAff"),prezzoMinAff=$(sliderPrezzoAff).data("min");prezzoMinAff=prezzoMinAff==undefined||prezzoMinAff==null||prezzoMinAff==0?500:prezzoMinAff;let prezzoMaxAff=$(sliderPrezzoAff).data("max");prezzoMaxAff=prezzoMaxAff==undefined||prezzoMaxAff==null||prezzoMaxAff==0?4e3:prezzoMaxAff;let uisliderprzAff=document.getElementById("sliderPrezzoAff");noUiSlider.create(uisliderprzAff,{start:[prezzoMinAff,prezzoMaxAff],tooltips:[wNumb({mark:".",thousand:",",prefix:"€ ",suffix:"",decimals:0}),wNumb({mark:".",thousand:",",prefix:"€ ",suffix:"",decimals:0})],connect:!0,step:100,range:{min:500,max:5e3},format:{to:function(value){return value},from:function(value){return Number(value)}}});uisliderprzAff.noUiSlider.on("update",function(values){$("#inp-prz-aff-min").val(values[0]);$("#inp-prz-aff-max").val(values[1])});let sliderDimensione=$("#sliderDimensione"),dimensioneMin=$(sliderDimensione).data("min");dimensioneMin=dimensioneMin==undefined||dimensioneMin==null||dimensioneMin==0?60:dimensioneMin;let dimensioneMax=$(sliderDimensione).data("max");dimensioneMax=dimensioneMax==undefined||dimensioneMax==null||dimensioneMax==0?250:dimensioneMax;let uisliderspr=document.getElementById("sliderDimensione");noUiSlider.create(uisliderspr,{start:[dimensioneMin,dimensioneMax],tooltips:[wNumb({decimals:0,suffix:" m²"}),wNumb({decimals:0,suffix:" m²"})],connect:!0,step:10,range:{min:30,max:500},format:{to:function(value){return value},from:function(value){return Number(value)}}});uisliderspr.noUiSlider.on("update",function(values){var format=wNumb({decimals:0});$("#inp-sup-min").val(format.to(values[0]));$("#inp-sup-max").val(format.to(values[1]))});ShowColPrice(null)}catch(ex){TrapError("Error during LoadFilter:"+ex)}}function SaveFilter(){try{let codiceComune=$("#codiceComune").val()!=null&&$("#codiceComune").val()!=""?parseInt($("#codiceComune").val()):0,rangePrice=document.getElementById("sliderPrezzo").noUiSlider.get(),index=$("#selectTipologiaAnnuncio").prop("selectedIndex");index==1&&(rangePrice=document.getElementById("sliderPrezzoAff").noUiSlider.get());let rangeDimensione=document.getElementById("sliderDimensione").noUiSlider.get(),ascensore=$("#customSwitchAscensore").is(":checked")?!0:null,cantina=$("#customSwitchCantina").is(":checked")?!0:null,giardino=$("#customSwitchGiaridno").is(":checked")?!0:null,piscina=$("#customSwitchPiscina").is(":checked")?!0:null,numeroBagni=$("#NumeroBagni").val()!=null&&$("#NumeroBagni").val()!=""?parseInt($("#NumeroBagni").val()):0,numeroAltreStanze=$("#NumeroAltreStanze").val()!=null&&$("#NumeroAltreStanze").val()!=""?parseInt($("#NumeroAltreStanze").val()):0,numeroCamereLetto=$("#NumeroCamereLetto").val()!=null&&$("#NumeroCamereLetto").val()!=""?parseInt($("#NumeroCamereLetto").val()):0,numeroCucine=$("#NumeroCucine").val()!=null&&$("#NumeroCucine").val()!=""?parseInt($("#NumeroCucine").val()):0,numeroGarage=$("#NumeroGarage").val()!=null&&$("#NumeroGarage").val()!=""?parseInt($("#NumeroGarage").val()):0,numeroPostiAuto=$("#NumeroPostiAuto").val()!=null&&$("#NumeroPostiAuto").val()!=""?parseInt($("#NumeroPostiAuto").val()):0,idTipologiaAnnuncio=$("#selectTipologiaAnnuncio").val();(idTipologiaAnnuncio==null||idTipologiaAnnuncio=="")&&(idTipologiaAnnuncio=null);let idTipologiaProprieta=$("#selectTipologiaProprieta").val();(idTipologiaProprieta==null||idTipologiaProprieta=="")&&(idTipologiaProprieta=null);let modelObj={CodiceComune:codiceComune,NomeComune:$("#searchbarInput").val(),IdTipologiaProprieta:idTipologiaProprieta,IdTipologiaAnnuncio:idTipologiaAnnuncio,PrezzoMin:rangePrice[0],PrezzoMax:rangePrice[1],DimensioneMin:rangeDimensione[0],DimensioneMax:rangeDimensione[1],NumeroBagni:numeroBagni,NumeroAltreStanze:numeroAltreStanze,NumeroCamereLetto:numeroCamereLetto,NumeroCucine:numeroCucine,NumeroGarage:numeroGarage,NumeroPostiAuto:numeroPostiAuto,Ascensore:$("#customSwitchAscensore").is(":checked"),Cantina:$("#customSwitchCantina").is(":checked"),Giardino:$("#customSwitchGiardino").is(":checked"),Piscina:$("#customSwitchPiscina").is(":checked")};$.ajax({type:"POST",url:"/Home/SaveSearchFilter",data:{Model:modelObj},dataType:"json",cache:!1,success:function(){$("#filterModal").modal("hide")},error:function(){TrapError("Error during ajax call SaveFilter")}})}catch(ex){TrapError("Error during SaveFilter"+ex)}}function ShowColPrice(){let index=$("#selectTipologiaAnnuncio").prop("selectedIndex");index==0?($("#col-ven").show(),$("#col-aff").hide()):($("#col-aff").show(),$("#col-ven").hide())}$(document).ready(function(){loggedUser!=null&&loggedUser.length>0&&(LoadFilter(),$("#btnSaveFilter").click(function(){SaveFilter()}),$('[data-quantity="plus"]').click(function(e){ButtonPlusIncrement(e,this)}),$('[data-quantity="minus"]').click(function(e){ButtonPlusDecrement(e,this)}),$("#inp-prz-min").blur(function(){UpdateSliderPrz()}),$("#inp-prz-max").blur(function(){UpdateSliderPrz()}),$("#inp-prz-aff-min").blur(function(){UpdateSliderPrzAff()}),$("#inp-prz-aff-max").blur(function(){UpdateSliderPrzAff()}),$("#inp-sup-min").blur(function(){UpdateSliderSup()}),$("#inp-sup-max").blur(function(){UpdateSliderSup()}))});